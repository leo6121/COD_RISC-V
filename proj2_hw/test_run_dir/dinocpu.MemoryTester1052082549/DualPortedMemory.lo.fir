circuit DualPortedMemory :
  module DualPortedMemory :
    input clock : Clock
    input reset : UInt<1>
    input io_imem_address : UInt<32>
    output io_imem_instruction : UInt<32>
    input io_dmem_address : UInt<32>
    input io_dmem_writedata : UInt<32>
    input io_dmem_memread : UInt<1>
    input io_dmem_memwrite : UInt<1>
    input io_dmem_maskmode : UInt<2>
    input io_dmem_sext : UInt<1>
    output io_dmem_readdata : UInt<32>
  
    mem memory : @[memory.scala 60:19]
      data-type => UInt<32>
      depth => 512
      read-latency => 0
      write-latency => 1
      reader => _T_2
      reader => _T_8
      reader => _T_14
      reader => _T_18
      reader => _T_22
      reader => _T_39
      writer => _T_52
      writer => _T_58
      read-under-write => undefined
    node _T = shr(io_imem_address, 2) @[memory.scala 63:49]
    node _T_1 = bits(_T, 8, 0) @[memory.scala 63:32]
    node _T_4 = neq(io_dmem_maskmode, UInt<2>("h2")) @[memory.scala 68:28]
    node _T_5 = bits(io_dmem_address, 1, 0) @[memory.scala 69:35]
    node _T_6 = shr(io_dmem_address, 2) @[memory.scala 70:42]
    node _T_7 = bits(_T_6, 8, 0) @[memory.scala 70:25]
    node _T_9 = mul(_T_5, UInt<4>("h8")) @[memory.scala 70:59]
    node _T_10 = dshr(memory._T_8.data, _T_9) @[memory.scala 70:48]
    node _T_11 = eq(io_dmem_maskmode, UInt<1>("h0")) @[memory.scala 71:30]
    node _T_12 = shr(io_dmem_address, 2) @[memory.scala 72:44]
    node _T_13 = bits(_T_12, 8, 0) @[memory.scala 72:27]
    node _T_15 = and(memory._T_14.data, UInt<8>("hff")) @[memory.scala 72:50]
    node _T_16 = shr(io_dmem_address, 2) @[memory.scala 74:44]
    node _T_17 = bits(_T_16, 8, 0) @[memory.scala 74:27]
    node _T_19 = and(memory._T_18.data, UInt<16>("hffff")) @[memory.scala 74:50]
    node _GEN_0 = validif(_T_11, _T_13) @[memory.scala 71:39]
    node _GEN_1 = validif(_T_11, clock) @[memory.scala 71:39]
    node _GEN_2 = mux(_T_11, UInt<1>("h1"), UInt<1>("h0")) @[memory.scala 71:39]
    node _GEN_3 = mux(_T_11, _T_15, _T_19) @[memory.scala 71:39]
    node _GEN_4 = validif(eq(_T_11, UInt<1>("h0")), _T_17) @[memory.scala 71:39]
    node _GEN_5 = validif(eq(_T_11, UInt<1>("h0")), clock) @[memory.scala 71:39]
    node _GEN_6 = mux(_T_11, UInt<1>("h0"), UInt<1>("h1")) @[memory.scala 71:39]
    node _T_20 = shr(io_dmem_address, 2) @[memory.scala 77:42]
    node _T_21 = bits(_T_20, 8, 0) @[memory.scala 77:25]
    node _GEN_7 = validif(_T_4, _T_7) @[memory.scala 68:37]
    node _GEN_8 = validif(_T_4, clock) @[memory.scala 68:37]
    node _GEN_9 = mux(_T_4, UInt<1>("h1"), UInt<1>("h0")) @[memory.scala 68:37]
    node _GEN_10 = mux(_T_4, _GEN_3, memory._T_22.data) @[memory.scala 68:37]
    node _GEN_11 = validif(_T_4, _GEN_0) @[memory.scala 68:37]
    node _GEN_12 = validif(_T_4, _GEN_1) @[memory.scala 68:37]
    node _GEN_13 = mux(_T_4, _GEN_2, UInt<1>("h0")) @[memory.scala 68:37]
    node _GEN_14 = validif(_T_4, _GEN_4) @[memory.scala 68:37]
    node _GEN_15 = validif(_T_4, _GEN_5) @[memory.scala 68:37]
    node _GEN_16 = mux(_T_4, _GEN_6, UInt<1>("h0")) @[memory.scala 68:37]
    node _GEN_17 = validif(eq(_T_4, UInt<1>("h0")), _T_21) @[memory.scala 68:37]
    node _GEN_18 = validif(eq(_T_4, UInt<1>("h0")), clock) @[memory.scala 68:37]
    node _GEN_19 = mux(_T_4, UInt<1>("h0"), UInt<1>("h1")) @[memory.scala 68:37]
    node _T_23 = eq(io_dmem_maskmode, UInt<1>("h0")) @[memory.scala 81:30]
    node _T_3 = _GEN_10 @[memory.scala 66:24 memory.scala 70:16 memory.scala 72:18 memory.scala 74:18 memory.scala 77:16]
    node _T_24 = bits(_T_3, 7, 7) @[memory.scala 82:50]
    node _T_25 = bits(_T_24, 0, 0) @[Bitwise.scala 72:15]
    node _T_26 = mux(_T_25, UInt<24>("hffffff"), UInt<24>("h0")) @[Bitwise.scala 72:12]
    node _T_27 = bits(_T_3, 7, 0) @[memory.scala 82:64]
    node _T_28 = cat(_T_26, _T_27) @[Cat.scala 30:58]
    node _T_29 = bits(_T_3, 15, 15) @[memory.scala 84:50]
    node _T_30 = bits(_T_29, 0, 0) @[Bitwise.scala 72:15]
    node _T_31 = mux(_T_30, UInt<16>("hffff"), UInt<16>("h0")) @[Bitwise.scala 72:12]
    node _T_32 = bits(_T_3, 15, 0) @[memory.scala 84:65]
    node _T_33 = cat(_T_31, _T_32) @[Cat.scala 30:58]
    node _GEN_20 = mux(_T_23, _T_28, _T_33) @[memory.scala 81:39]
    node _GEN_21 = mux(io_dmem_sext, _GEN_20, _T_3) @[memory.scala 80:25]
    node _GEN_22 = validif(io_dmem_memread, _GEN_7) @[memory.scala 65:26]
    node _GEN_23 = validif(io_dmem_memread, _GEN_8) @[memory.scala 65:26]
    node _GEN_24 = mux(io_dmem_memread, _GEN_9, UInt<1>("h0")) @[memory.scala 65:26]
    node _GEN_25 = validif(io_dmem_memread, _GEN_11) @[memory.scala 65:26]
    node _GEN_26 = validif(io_dmem_memread, _GEN_12) @[memory.scala 65:26]
    node _GEN_27 = mux(io_dmem_memread, _GEN_13, UInt<1>("h0")) @[memory.scala 65:26]
    node _GEN_28 = validif(io_dmem_memread, _GEN_14) @[memory.scala 65:26]
    node _GEN_29 = validif(io_dmem_memread, _GEN_15) @[memory.scala 65:26]
    node _GEN_30 = mux(io_dmem_memread, _GEN_16, UInt<1>("h0")) @[memory.scala 65:26]
    node _GEN_31 = validif(io_dmem_memread, _GEN_17) @[memory.scala 65:26]
    node _GEN_32 = validif(io_dmem_memread, _GEN_18) @[memory.scala 65:26]
    node _GEN_33 = mux(io_dmem_memread, _GEN_19, UInt<1>("h0")) @[memory.scala 65:26]
    node _GEN_34 = validif(io_dmem_memread, _GEN_21) @[memory.scala 65:26]
    node _T_34 = neq(io_dmem_maskmode, UInt<2>("h2")) @[memory.scala 92:28]
    node _T_35 = bits(io_dmem_address, 1, 0) @[memory.scala 93:35]
    node _T_37 = shr(io_dmem_address, 2) @[memory.scala 96:42]
    node _T_38 = bits(_T_37, 8, 0) @[memory.scala 96:25]
    node _T_41 = eq(io_dmem_maskmode, UInt<1>("h0")) @[memory.scala 99:30]
    node _T_42 = mul(_T_35, UInt<4>("h8")) @[memory.scala 100:48]
    node _T_43 = dshl(UInt<8>("hff"), _T_42) @[memory.scala 100:37]
    node _T_44 = not(_T_43) @[memory.scala 100:28]
    node _T_36 = memory._T_39.data @[memory.scala 95:26 memory.scala 96:16]
    node _T_45 = and(_T_36, _T_44) @[memory.scala 100:26]
    node _T_46 = mul(_T_35, UInt<4>("h8")) @[memory.scala 102:50]
    node _T_47 = dshl(UInt<16>("hffff"), _T_46) @[memory.scala 102:39]
    node _T_48 = not(_T_47) @[memory.scala 102:28]
    node _T_49 = and(_T_36, _T_48) @[memory.scala 102:26]
    node _GEN_35 = mux(_T_41, _T_45, _T_49) @[memory.scala 99:39]
    node _T_50 = shr(io_dmem_address, 2) @[memory.scala 104:30]
    node _T_51 = bits(_T_50, 8, 0) @[memory.scala 104:13]
    node _T_53 = mul(_T_35, UInt<4>("h8")) @[memory.scala 104:76]
    node _T_54 = dshl(io_dmem_writedata, _T_53) @[memory.scala 104:65]
    node _T_40 = bits(_GEN_35, 31, 0) @[memory.scala 98:22 memory.scala 100:14 memory.scala 102:14]
    node _T_55 = or(_T_40, _T_54) @[memory.scala 104:44]
    node _T_56 = shr(io_dmem_address, 2) @[memory.scala 106:30]
    node _T_57 = bits(_T_56, 8, 0) @[memory.scala 106:13]
    node _GEN_36 = validif(_T_34, _T_38) @[memory.scala 92:37]
    node _GEN_37 = validif(_T_34, clock) @[memory.scala 92:37]
    node _GEN_38 = mux(_T_34, UInt<1>("h1"), UInt<1>("h0")) @[memory.scala 92:37]
    node _GEN_39 = validif(_T_34, _T_51) @[memory.scala 92:37]
    node _GEN_40 = validif(_T_34, UInt<1>("h1")) @[memory.scala 92:37]
    node _GEN_41 = validif(_T_34, _T_55) @[memory.scala 92:37]
    node _GEN_42 = validif(eq(_T_34, UInt<1>("h0")), _T_57) @[memory.scala 92:37]
    node _GEN_43 = validif(eq(_T_34, UInt<1>("h0")), clock) @[memory.scala 92:37]
    node _GEN_44 = mux(_T_34, UInt<1>("h0"), UInt<1>("h1")) @[memory.scala 92:37]
    node _GEN_45 = validif(eq(_T_34, UInt<1>("h0")), UInt<1>("h1")) @[memory.scala 92:37]
    node _GEN_46 = validif(eq(_T_34, UInt<1>("h0")), io_dmem_writedata) @[memory.scala 92:37]
    node _GEN_47 = validif(io_dmem_memwrite, _GEN_36) @[memory.scala 91:27]
    node _GEN_48 = validif(io_dmem_memwrite, _GEN_37) @[memory.scala 91:27]
    node _GEN_49 = mux(io_dmem_memwrite, _GEN_38, UInt<1>("h0")) @[memory.scala 91:27]
    node _GEN_50 = validif(io_dmem_memwrite, _GEN_39) @[memory.scala 91:27]
    node _GEN_51 = validif(io_dmem_memwrite, _GEN_40) @[memory.scala 91:27]
    node _GEN_52 = validif(io_dmem_memwrite, _GEN_41) @[memory.scala 91:27]
    node _GEN_53 = validif(io_dmem_memwrite, _GEN_42) @[memory.scala 91:27]
    node _GEN_54 = validif(io_dmem_memwrite, _GEN_43) @[memory.scala 91:27]
    node _GEN_55 = mux(io_dmem_memwrite, _GEN_44, UInt<1>("h0")) @[memory.scala 91:27]
    node _GEN_56 = validif(io_dmem_memwrite, _GEN_45) @[memory.scala 91:27]
    node _GEN_57 = validif(io_dmem_memwrite, _GEN_46) @[memory.scala 91:27]
    io_imem_instruction <= memory._T_2.data @[memory.scala 63:23]
    io_dmem_readdata <= _GEN_34 @[memory.scala 82:26 memory.scala 84:26 memory.scala 87:24]
    memory._T_2.addr <= _T_1 @[memory.scala 63:32]
    memory._T_2.en <= UInt<1>("h1") @[memory.scala 60:19 memory.scala 63:32]
    memory._T_2.clk <= clock @[memory.scala 63:32]
    memory._T_8.addr <= _GEN_22 @[memory.scala 70:25]
    memory._T_8.en <= _GEN_24 @[memory.scala 60:19 memory.scala 70:25]
    memory._T_8.clk <= _GEN_23 @[memory.scala 70:25]
    memory._T_14.addr <= _GEN_25 @[memory.scala 72:27]
    memory._T_14.en <= _GEN_27 @[memory.scala 60:19 memory.scala 72:27]
    memory._T_14.clk <= _GEN_26 @[memory.scala 72:27]
    memory._T_18.addr <= _GEN_28 @[memory.scala 74:27]
    memory._T_18.en <= _GEN_30 @[memory.scala 60:19 memory.scala 74:27]
    memory._T_18.clk <= _GEN_29 @[memory.scala 74:27]
    memory._T_22.addr <= _GEN_31 @[memory.scala 77:25]
    memory._T_22.en <= _GEN_33 @[memory.scala 60:19 memory.scala 77:25]
    memory._T_22.clk <= _GEN_32 @[memory.scala 77:25]
    memory._T_39.addr <= _GEN_47 @[memory.scala 96:25]
    memory._T_39.en <= _GEN_49 @[memory.scala 60:19 memory.scala 96:25]
    memory._T_39.clk <= _GEN_48 @[memory.scala 96:25]
    memory._T_52.addr <= _GEN_50 @[memory.scala 104:13]
    memory._T_52.en <= _GEN_49 @[memory.scala 60:19 memory.scala 104:13]
    memory._T_52.clk <= _GEN_48 @[memory.scala 104:13]
    memory._T_52.data <= bits(_GEN_52, 31, 0) @[memory.scala 104:36]
    memory._T_52.mask <= _GEN_51 @[memory.scala 104:13 memory.scala 104:36]
    memory._T_58.addr <= _GEN_53 @[memory.scala 106:13]
    memory._T_58.en <= _GEN_55 @[memory.scala 60:19 memory.scala 106:13]
    memory._T_58.clk <= _GEN_54 @[memory.scala 106:13]
    memory._T_58.data <= _GEN_57 @[memory.scala 106:36]
    memory._T_58.mask <= _GEN_56 @[memory.scala 106:13 memory.scala 106:36]
